/* ==UserStyle==
@name         Dark ProtonMail by Mew
@description  Dark theme ProtonMail.
@version      0.2.0
@namespace    gitlab.com/vednoc/dark-protonmail
@homepageURL  https://gitlab.com/vednoc/dark-protonmail
@supportURL   https://gitlab.com/vednoc/dark-discord/issues
@updateURL    https://gitlab.com/vednoc/dark-protonmail/raw/master/pm.user.styl
@author       vednoc
@license      MIT
@preprocessor stylus

@var checkbox layout_buttons "Custom layout buttons" 1
@var checkbox remove_outline "Remove outline from all elements" 0

@var text b_radius "Custom border radius" 4px
@var text max_width "Custom width for row layout" 1000px
@var text sidebar_width "Custom sidebar width" 200px
@var text ui_font "Custom UI font" "'custom_font', Arial, Helvetica Nue, Helvetica, sans-serif !important"
@var text mo_font "Custom mono font" "'custom_font', 'mono', monospace !important"
@var text bg_image "Custom background" "url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAYElEQVQ4je3ToRlAIQiFUWdiEvdxEILJCQivksg0usVF7O8atfHHE7kfZc75lV+9dzAzA2utgWUXWmvBYccYYLVWsIjIUV50Ora7g53GO31UdiFVhcMSERgzg4lIjvKgDW1KKbJCEZa/AAAAAElFTkSuQmCC')"

@var color dark    "Dark color.   " #222222
@var color darken  "Darken color. " #282828
@var color darker  "Darker color. " #2f2f2f
@var color light   "Light color.  " #d1d1d1
@var color lighter "Lighter color." #c9c9c9
@var color icon    "Icon color.   " #e1e1e1
@var color accent  "Accent color. " #7289da
@var color yellow  "Yellow color. " #f0c674
@var color orange  "Orange color. " #de935f
@var color red     "Red color.    " #a54242
@var color magenta "Magenta color." #b294bb
@var color violet  "Violet color. " #85678f
@var color blue    "Blue color.   " #5f819d
@var color cyan    "Cyan color.   " #5e8d87
@var color green   "Green color.  " #8c9440
@var color white   "White color.  " #ffffff
@var color shadow  "Shadow color. " #00000020

==/UserStyle== */

@-moz-document regexp("https?://(mail|beta).protonmail.com/.*") {
    :root {
        scrollbar-color: var(--darker) var(--dark);
        --note    : "Dark-ProtonMail v0.2.0";
        --dark    : dark;
        --darken  : darken;
        --darker  : darker;
        --light   : light;
        --lighter : lighter;
        --accent  : accent;
        --icon    : icon;
        --shadow  : shadow;
        --yellow  : yellow;
        --orange  : orange;
        --red     : red;
        --magenta : magenta;
        --violet  : violet;
        --blue    : blue;
        --cyan    : cyan;
        --green   : green;
        --white   : white;
        --t       : transparent !important;
        --width   : max_width;
        --sidebar : sidebar_width;
        --radius  : b_radius;
        --bg-image: bg_image;
        --ui-font : ui_font;
        --mo-font : mo_font;
    }

    // * Use stylus-lang variables with CSS variables.
    $dark    = var(--dark);
    $darken  = var(--darken);
    $darker  = var(--darker);
    $light   = var(--light);
    $lighter = var(--lighter);
    $accent  = var(--accent);
    $icon    = var(--icon);
    $shadow  = var(--shadow);
    $bshadow = var(--box-shadow);
    $yellow  = var(--yellow);
    $orange  = var(--orange);
    $red     = var(--red);
    $magenta = var(--magenta);
    $violet  = var(--violet);
    $blue    = var(--blue);
    $cyan    = var(--cyan);
    $green   = var(--green);
    $white   = var(--white);
    $t       = var(--t);
    r        = var(--radius);
    $r       = var(--radius);

    // * Color mixin.
    // ? All colors -> colors: $light, $darker, $dark;
    // ? Only background-color -> colors: 0, 0, $dark;
    colors(x, y, z) {
        if x is a 'call' { color: x !important; }
        if y is a 'call' { border-color: y !important; }
        if z is a 'call' { background-color: z !important; }
    }
    // All colors: `c: $light $darker $dark;`
    // Only border-color: `c: 0 $darker;`
    c(x, y = 0, z = 0, xi = 1, yi = 1, zi = 1) {
        if x is a 'call' or x is a 'rgba' {            color: xi is 0 ? x : x !important }
        if y is a 'call' or y is a 'rgba' {     border-color: yi is 0 ? y : y !important }
        if z is a 'call' or z is a 'rgba' { background-color: zi is 0 ? z : z !important }
    }
    // SVG colors.
    s(x, y = 0, xi = 1, yi = 1) {
        if x is a 'call' or x is a 'rgba' {   fill: xi is 0 ? x : x !important }
        if y is a 'call' or y is a 'rgba' { stroke: yi is 0 ? y : y !important }
    }
    // Border radius mixin.
    rad() { border-radius: arguments }

    /* Scrollbars. */
    ::-webkit-scrollbar {
        width: 10px !important;
        &-scrollbar-thumb {
            border: 1px solid $dark;
            background-color: $darker;
            &:hover, &:active { background-color: $accent; }
        }
        &-scrollbar-track { background-color: $dark; }
    }


    body {
        color: var(--lighter);
        background: var(--dark) !important;

        // * Feature -> Custom UI font.
        &, .pm_opensans, [class*="header"] {
            font-family: var(--ui-font);
        }

        // * Global -> Change layout buttons.
        #tour-layout [class*="Btns-btn-"]:hover,
        &[class*="Body-rows"] #tour-layout [class*="Btns-btn-rows"],
        &:not([class*="Body-rows"]) #tour-layout [class*="Btns-btn-column"] {
            colors: $accent, 0, $darker;
            box-shadow: 0 2px 4px 0 inset $shadow !important;
        }

        // * Feature -> Custom layout buttons.
        if ( layout_buttons == 1 ) {
            #tour-layout [class*="LayoutBtns-btn-column"] {
                img { display: none !important; }
                &::before { content: "Col"; }
            }
            #tour-layout [class*="LayoutBtns-btn-row"] {
                img { display: none !important; }
                &::before { content: "Row"; }
            }
        }

        // * Global -> Custom background.
        &[class*="Body-rows"] #conversation-view, #conversation-list-rows {
            position: relative;
            &::before {
                z-index: -1;
                size = 20px;
                content: "";
                opacity: 0.15;
                position: absolute;
                top: 0; right: 0; bottom: 0; left: 0;
                background: var(--bg-image);
                background-position: center center;
                background-size: size size;
            }
        }

        // * Feature -> Remove `outline` from all elements.
        if ( remove_outline == 1 ) {
            * { outline: none !important; }
        }
    }

    h1, h2, h3, h4, h5, h6, strong {
        color: var(--lighter) !important;
    }

    a, p a {
        text-decoration: none;
        color: var(--accent);
    }

    ::placeholder { colors: $lighter, 0, 0; }

    input {
        color: var(--lighter) !important;
        background: none !important;
    }

    select {
        color: var(--light) !important;
        background-color: var(--darker);
    }

    blockquote {
        border-left-color: var(--accent);
    }

    section {
        border-color: var(--darker) !important;
    }

    kbd {
        color: var(--lighter);
        background-color: var(--dark);
        box-shadow: inset 0 0 0 1px var(--darker);
    }

    .pm_panel {
        color: var(--lighter);
    }
    .pm_panel.alt {
        background-color: transparent;
    }

    // * Login page.
    #login {
        background-image: none !important;
        .pm_panel-login__inner {
            padding: 20px 30px 0;
            rad: r;
            colors: 0, $darker, $dark;
            box-shadow: 0 4px 16px -2px $shadow;
            .link {
                text-decoration: underline;
                colors: $lighter 0 0;
            }
            img[class="logo"] { display: none; }
            input {
                rad: r;
                colors: $lighter, $darker, 0;
                box-shadow: 0 2px 4px 0 inset $shadow;
            }
            button {
                rad: r;
                transition: 0.15s ease;
            }
            // New user notice.
            [class*="-new-title"] {
                &::before, &::after { colors: 0, $darker, 0; }
            }
        }
        // `Beta` promotion.
        .pm_panel-bottom {
            padding: 10px 20px;
            text-align: center;
            a { colors: $accent, 0, 0; }
        }
        [class*="link-signup-button"] {
            rad: r;
            transition: 0.15s ease;
            colors: $light, $darker, $darker;
            &:hover { colors: $accent 0 $dark }
        }
        #pm_footer {
            colors: $lighter, 0, 0;
            a { colors: $accent 0 0 }
        }
    }

    // * Navbar.
    header[class*="header"] {
        min-height: 50px;
        colors: $lighter $t $dark;
        box-shadow: 0 1px 0 0 $darker;
        // Re-imagine the logo.
        [class*="securedDesktop-logo" i] {
            height: 51px;
            padding: 0;
            colors: $light, 0, $t;
            // * Feature -> Custom sidebar width.
            @media screen and (min-width: 900px) {
                width: var(--sidebar);
            }
            &::before {
                width: unset;
                height: unset;
                font-size: 1.4em;
                content: "ProtonMail";
                transition: 0.15s ease;
                background: none;
            }
            &:hover { colors: $accent, 0, 0; }
        }
        // Navigation on the right.
        .navigation > {
            li {
                border: none;
                min-height: 51px;
                transition: 0.15s ease;
                colors: $lighter 0 0;
                &:hover, a.active { colors: $light 0 $darker; }
            }
        }
        // Sub-nav height reset.
        >[class*="Desktop-container"] {
            height: auto;
            max-height: 51px;
        }
        // New update notifier!
        [class*="-newVersion-info"] {
            left calc(50% + 2px);
            top: 8px !important;
            colors: 0 0 $accent;
            // Alert in the dropdown.
            + .pm_dropdown [class*="newVersion-container"] {
                rad: r;
                colors: $light $accent $t;
            }
        }
    }

    // * Search bar.
    [class*="searchForm-container"] {
        // Search area.
        .search-form-fieldset {
            rad: r;
            colors: $lighter, 0, $dark;
            box-shadow: 0 0 0 1px inset $darker;
        }
        // Toggle button.
        [class*="-action-button-"]:hover { c: 0 0 $t }
        // Dropdown.
        .searchForm-advanced-container {
            rad: r;
            colors: 0, 0, $dark;
            box-shadow: 0 0 0 1px $darker, 0 2px 8px 0 $shadow;
            // Fields background reset.
            [class*="searchForm-advanced-"] { colors: $lighter, 0, $t; }
            label, .fa { color: $light; }
            // Inputs and buttons.
            input, button {
                rad: r;
                box-shadow: 0 1px 4px 0 inset $shadow;
                colors: 0, $darker, 0;
                &:focus { colors: 0, $blue, 0; }
                &[type="submit"] { &, .fa { colors: $white, $blue, $blue; }}
            }
            // Select menus.
            .pm_select {
                rad: r;
                colors: 0, 0, $t;
                box-shadow: 0 0 0 1px inset $darker;
                select {
                    rad: r;
                    box-shadow: 0 1px 4px 0 inset $shadow;
                    &:focus { box-shadow: 0 0 0 1px inset $blue; }
                }
            }
            // Header.
            [class*="-advanced-main"] {
                box-shadow: 0 1px 0 0 $darker;
            }
        }
    }

    // * Global -> Buttons.
    .pm_button {
        transition: 0.15s ease;
        &.primary {
            colors: $accent $accent $dark;
            &:hover { colors: $white 0 $accent; }
        }
    }

    // * Global -> Pagination.
    .paginator {
        > a {
            transition: 0.15s ease;
            colors: $lighter $darker $dark;
            &:hover { colors: $light 0 0 }
            // &:last-child { rad: 0 r r 0 }
            // &:first-child { rad: r 0 0 r }
        }
        &[class*="-prev"] > [class*="btn-prev"] i,
        &[class*="-next"] > [class*="btn-next"] i {
            colors: $lighter 0 0;
            opacity: 0.3;
        }
        // * Contacts -> Reset button background.
        a {
            colors: 0 $darker $t;
            box-shadow: none !important;
        }
    }

    // * Global -> Custom button colors.
    .fa.fa {
        color: $lighter;
        &-star { colors: $accent, 0, 0; }
        &-trash-o { &, &:hover { colors: $red, 0, 0; }}
        &-inbox { &, &:hover { colors: $blue, 0, 0; }}
        &-archive { &, &:hover { colors: $cyan, 0, 0; }}
        &-ban { &, &:hover { colors: $orange, 0, 0; }}
        &-times-circle-o { &, &:hover { colors: $red, 0, 0; }}
        &-send { &, &:hover { colors: $green, 0, 0; }}
        &-folder { &, &:hover { colors: $yellow, 0, 0; }}
        &-search { &, &:hover { colors: $lighter, 0, 0; }}
        // ? Inherit label's custom color.
        &[data-label-id] { color: inherit !important; }
    }

    // * Global -> Tooltips.
    .tooltip {
        rad: r;
        color: $white;
        background-color: black;
        &-arrow { border-color: black; }
    }

    // * Global -> Notifications.
    .cg-notify-message {
        rad: r;
        box-shadow: 0 2px 4px -1px $shadow !important;
        &.notification-success {
            colors: 0 0 $green;
            span { colors: $white 0 0 }
        }
    }

    // * Global -> Labels.
    .pm_labels {
        [class*="-label"] {
            transition: 0.15s ease;
            rad: calc(var(--radius) / 2);
            border: 1px solid !important;
            &:hover { opacity: 0.6; }
            // Fixes label misalignment in messages.
            [class*="-name"] {
                overflow: unset;
                padding: 0.2rem;
            }
        }
    }

    // * Global -> Tables.
    .pm_table > table {
        colors: 0 0 $t;
        box-shadow: none;
        thead th {
            colors: $light $darker $t;
            // Sort buttons.
            .fa.fa-sort { &-desc, &-asc { colors: $lighter 0 0 }}
        }
        tbody tr {
            // Active row.
            &[class*="-activeContact"] td {
                colors: $light $darker $darker;
                span { &, * { color: inherit }}
            }
            // Indicator.
            &[class*="-activeCursor"] td:first-child {
                box-shadow: 4px 0 0 0 inset $accent;
            }
            // Table cells.
            td {
                border-left: none;
                colors: $lighter 0 0;
                ../:hover td { colors: $light $darker $darker }
            }
        }
    }

    // * Global -> Loader.
    .pm-loader-fullpage { colors: 0, 0, $dark; }

    // * Global -> Loading.
    #pm_loading {
        colors: 0, 0, $dark;
        box-shadow: 0 2px 8px 0 $shadow;
        &::after {
            border: 5px solid $darker;
            border-top-color: $accent;
        }
        svg path { fill: $accent; }
    }

    // * Global -> Atom lodaer.
    #pm_slow, #pm_slow2, [class*="loadingUnlock-"] {
        colors: $lighter, 0, $dark;
        .atomLoader {
            &-proton { colors: 0, 0, $light; }
            &-item, &-item2, &-item3 { colors: 0, $lighter, 0; }
            &-text { colors: $lighter, 0, 0; }
        }
    }

    // * Global -> Storage.
    .storageProgress-container, .storageArea {
        .link span { colors: $accent 0 0 }
        .storageBar {
            colors: 0 0 $darker;
            &-progress { colors: 0 0 $accent; }
        }
        // Hide version number.
        + .version { display: none; }
    }

    // * Global -> Checkboxes.
    .customCheckbox-input {
        + .customCheckbox-mask {
            colors: 0, $darker, $dark;
            background-image: none;
            ../:checked + .customCheckbox-mask {
                position: relative;
                &::before {
                    content: "";
                    position: absolute;
                    top: 1px; left: 4px;
                    width: 6px; height: 10px;
                    border-right: 2px solid;
                    border-bottom: 2px solid;
                    transform: rotate(45deg);
                    colors: 0, $light, 0;
                }
            }
        }
    }

    // * Global -> Radials.
    .customRadio-input {
        + .customRadio-mask {
            background-image: none;
            colors: 0, $darker, $dark;
            ../:checked + .customRadio-mask {
                box-shadow: 0 0 0 3px inset $darker, 0 0 0 10px inset $accent;
            }
        }
    }

    // * Global -> Dropdowns.
    .pm_dropdown {
        rad: r !important;
        colors: 0, $darker, $dark;
        box-shadow: 0 2px 8px -1px $shadow;
        .dropdown-folder-title { colors: 0, $darker, 0; }
        // Text color; exludes colored labels.
        a, span:not([style]), button { colors: $lighter $darker 0 }
        // Folders.
        .scrollbox-container {
            colors: 0, $darker, $t;
            background-image: none;
            /* Remove weird gradients. */
            &::before, &::after { display: none; }
        }
        // Wide dropdowns.
        &.wide {
          padding: 0;
          > * { padding: 0 8px !important }
        }
        > a, > button, > ul > li { &:hover { c: 0 0 $darker }}
    }

    // * Welcome section.
    #pm_view #pm_latest {
        header {
            padding: 8px 24px;
            colors: $light, $darker, 0;
        }
        section {
            padding: 0.5rem;
            margin: 8px;
            rad: r;
            span { colors: $lighter, 0, 0; }
            strong { colors: $accent, 0, 0; }
            img { filter: invert(1) hue-rotate(180deg) opacity(0.2); }
        }
    }

    // * Command pallete.
    [class*="commandPalette-container"] {
        rad: r;
        colors: 0, 0, $dark;
        box-shadow: 0 2px 8px -2px $shadow;
        // Input section.
        [class*="autocomplete-c"] {
            rad: r;
            colors: 0, 0, $dark;
            box-shadow: 0 0 0 1px $darker;
        }
        // Commands.
        [class*="Emails-"] {
            max-height: 150px;
            colors: 0, 0, $t;
            // Items.
            .needsclick {
                transition: 0.15s ease;
                colors: 0, $darker, 0;
                &[aria-selected="false"] { colors: $lighter, 0, $dark; }
                &[aria-selected="true"], &:hover { colors: $light, 0, $darker; }
            }
        }
    }

    // * Sidebar.
    #ptSidebar {
        min-width: unset;
        border-right: 1px solid;
        colors: 0, $darker, $dark;
        height: calc(100% - 51px);
        // * Feature -> Custom sidebar width.
        @media screen and (min-width: 900px) {
            width: var(--sidebar);
        }
        .sidebarApp-item {
            // List items.
            .navigationItem-item {
                transition: 0.15s ease;
                colors: $lighter 0 0;
                .navigationItem-counter { color: inherit; }
                .navigationItem-aside { background: none; }
                ../:hover:not(.active) > a { colors: $light 0 $darker }
            }
            &.active {
                colors: $light 0 $darker;
                // Fixes icon colors.
                a, span { color: inherit !important }
            }
            // Remove the gradient.
            &::after { background: none !important; }
            // Use filled style for starred messages icon.
            .fa.fa-star-o {
                colors: $accent, 0, 0;
                &::before { content: "\f005"; }
            }
        }
        // Labels.
        .sidebarApp-link { colors: $light 0 0 }
        .menuLabel-item {
            em { colors: $lighter 0 0 }
            .menuLabel-link {
                transition: 0.15s ease;
                colors: $lighter 0 0;
                ../.active .menuLabel-title { colors: $light 0 0 }
                ../:hover .menuLabel-link { colors: $light 0 $darker }
            }
        }
        // Compose/back button.
        [class*="-compose"], [class*="-back"] {
            margin: 16px 0;
            rad: r;
            transition: 0.15s ease;
            colors: $light $darker $t;
            box-shadow: 0 2px 4px -1px $shadow;
            &:hover { colors: $accent 0 $darker }
        }
        // Scrollbar.
        [class*="_draggerContainer"] {
            [class*="Rail"] { colors: 0 0 $darker }
            [class*="_bar"] { colors: 0 0 $accent }
        }
    }

    // * Main -> Content.
    #pm_main {
        color: $light;
        background-color: $t;

        // * Feature -> Custom sidebar width.
        @media screen and (min-width: 900px) {
            width: calc(100% - var(--sidebar)) !important;
        }
        #wrapper {
            // Tweak height due to navbar being shorter.
            height: calc(100% - 47px);
            // ? Settings -> Custom width for row layout.
            @media screen and (min-width: 1280px) {
                .conversation-wrapper > .conversation {
                    margin: 0 auto;
                    max-width: var(--width);
                    box-shadow: 1px 0 0 $darker, -1px 0 0 $darker;
                }
            }
            // * Content -> Row view.
            #conversation-list-rows {}
            // * Content -> Column view.
            #conversation-list-columns {
                colors: 0, $darker, $dark;
            }
        }
        // Conversations.
        .conversation {
            colors: 0 $darker $dark;
            &.read { colors: 0 0 $dark }
            &.marked::before {
                width: 4px;
                colors: 0 0 $green;
            }
            // Remove backgrounds.
            .subject, .pm_labels { background: $t !important; }
            // Highlight unread messages.
            &:not(.read) {
                background-image: linear-gradient(
                    to right, $darker -100%, $dark
                ) !important;
            }
            // Hover event.
            &:hover {
                background-image: none !important;
                colors: 0, 0, $darken;
            }
        }
    }

    // * Content -> Toolbar.
    .pm_toolbar {
        colors: 0, 0, $dark;
        box-shadow: 0 1px 0 0 $darker;
        .pm_buttons {
            colors: $lighter, 0, 0;
            a, button { box-shadow: 0 2px 4px -1px $shadow; }
            &-child, a, button {
                colors: 0, $darker, $dark;
                // TODO: Temporary implementation.
                &:hover:not(.fa-ban):not(.fa-archive):not(.fa-trash-o):not(
                    .fa-inbox):not(.fa-times-circle-o) {
                    colors: $light, 0, 0;
                }
                &.active, &:hover { colors: $light 0 $darker; }
            }
            &.disabled {
                &, a[class] {
                    opacity: 0.75 !important;
                    colors: $lighter, $darker, $darker;
                    box-shadow: none !important;
                }
            }
        }
        .action [class*="LayoutBtns-btn"] {
            transition: 0.15s ease;
            img { filter: grayscale(100%); }
            &:focus { colors: $light 0 $dark }
        }
    }

    // * Content -> Message view.
    #conversation-view {
        #pm_thread {
            padding: 0 10px;
            // ? Settings -> Custom width for row layout.
            > article {
                margin: 10px auto;
                max-width: var(--width);
            }
        }
        // Message header.
        header[id*="header" i] {
            z-index: 1;
            colors: 0, $darker, $dark;
            h1 {
                letter-spacing: 0;
                padding: 8px 30px 8px 0;
                .starButton {
                    right: 1px; top: 10px;
                    // TODO: Fix and polish animation.
                    &:hover a::before { colors: $accent, 0, 0; }
                }
            }
        }
        // Message content.
        .message {
            rad: r;
            colors: 0, $darker, $dark;
            &.open { box-shadow: 0 2px 4px -1px $shadow }
            &.unread { colors: 0 0 $darker; }
            .more {
                colors: $light $darker $dark;
                &:not([class*='-toggle']) { colors: $accent $accent 0 }
            }
            .summary:not(._xd) {
                colors: 0, $darker, $darken;
                // Transparentize all elements.
                .summary-right:not(._is):not(._xd) { &, * { colors: 0, 0, $t; }}
                // Rounded corners for message body.
                + div .frame {
                    rad: 0 0 r r;
                    colors: 0 0 $t;
                }
                .pm_badge, .pm_tag { colors: $lighter 0 $darker }
            }
            .details {
                colors: 0, $darker, $darken;
                // TODO: Possible refactor with global `pm_buttons` styles.
                .action-row .pm_buttons > a {
                    transition: 0.15s ease;
                    colors: $lighter, $darker, $dark;
                    &.active, &:hover { colors: $light, 0, $darker; }
                }
                .action-row {
                    .toggleDetails { colors: $accent 0 $t }
                }
                // Alerts and stuff.
                [class*="messageExtra-"] > [class*="-container"] {
                    rad: r;
                    colors: $lighter, 0, $darker;
                    a { colors: $accent, 0, 0; }
                    span { colors: $lighter, 0, 0; }
                    button { colors: $lighter, $dark, $darker; }
                }
            }
            // ? Scroll past the last message in conversations.
            &:last-child { margin-bottom: 50vh !important }
        }
        // Message area.
        // TODO: Needs more work.
        .message-frame {
            a {
                img {
                    opacity: 0.3;
                    pointer-events: all;
                    transition: 0.15s ease;
                    border-radius: r;
                    ../:hover img {
                        opacity: 1 !important;
                        transition-delay: 0.5s;
                    }
                }
            }
            blockquote { colors: $lighter $darker 0; }
            pre {
                rad: r;
                colors: $light $darker $dark;
                box-shadow: 0 2px 4px 0 $shadow;
            }
            div[style*="background"] { colors: 0 0 $t }
            [style*="border"] { colors: 0 $darker 0 }
            // ! Possibly reset custom emails.
            .bodyDecrypted {
                // * Feature -> Custom code font.
                &.plain { font-family: var(--mo-font) }
                // Try to center the content.
                > div[style*="width"] { margin: 0 auto !important }
                a[style*="color"] {
                    colors: $blue 0 0;
                    &:hover { text-decoration: underline }
                }
                div, p, span, i { colors: $lighter 0 0 }
                h1, h2, h3, h4, h5, h6 { colors: $light 0 0; }
                table { tr, th, td { colors: $lighter $darker $dark; }}
                img { filter: invert(1) hue-rotate(180deg) !important; }
            }
        }
        // Attachments.
        #attachmentArea {
            colors: 0, $darker, $t;
            .listAttachments-list {
                padding-top: 10px;
                .listAttachments-att {
                    rad: r;
                    colors: $lighter, $darker, $dark;
                    &::after { colors: 0, $darker, 0; }
                }
            }
        }
    }

    // * Messages -> Full-width labels in the row mode.
    #pm_main .conversation-wrapper .conversation .subject {
        position: relative;
        padding-left: 0;
        display: flex;
        h4 {
            display: flex;
            flex: 1 1 auto;
            max-width: unset !important;
            overflow-x: auto !important;
        }
        .pm_labels {
            all: unset !important;
            display: flex !important;
            flex: 0 0 auto !important;
            > div[class*='labelsElement-'] {
                padding: 1.5px;
                transition: 0.15s ease;
                border: 1px solid !important;
                rad: 3px;
                colors: 0 0 $dark;
                &:hover { opacity: 0.6 }
                // Stacked labels.
                ^[1][data-format="stack"] [class*="-label"] {
                    max-width: unset;
                }
            }
            // More labels button.
            [class*="-more"] {
                margin-left: 0.25rem;
                colors: $lighter $lighter 0;
            }
        }
    }

    // * Content -> Composer.
    #pm_composer .composer {
        rad: r;
        border: 1px solid;
        colors: $lighter, $darker, $dark;
        box-shadow: 0 2px 4px -1px $shadow;
        // Header.
        // TODO: Optimize for different components.
        &Header-container, &Options-container {
            colors: $light, 0, $darker;
        }
        // Inputs.
        .row {
            &, select, input { colors: $lighter, $darker, $t; }
            .composerInputMeta-overlay { colors: $light, 0, $darker; }
            .svg-ellipsis-clipper { display: none; }
        }
        footer {
            colors: $light, $darker, $t;
        }
        // TODO: Possible refactor with global `pm_button` styles.
        .pm_button {
            rad: calc(var(--radius) / 2);
            transition: 0.15s ease;
            colors: $lighter, $darker, $dark;
            &:hover { colors: $light, 0, $darker; }
            &.primary {
                colors: $white, $accent, $accent;
                &:hover { colors: $accent, 0, $darker; }
            }
        }
    }

    // * Content -> Composer additions.
    .squire-container {
        colors: 0 0 $dark;
        input, select, textarea { colors: $light 0 $dark; }
        // Popouts.
        .squire-popover {
            colors: 0 $darker $dark;
            &, &-second { rad: r !important }
        }
        // Toolbar.
        .squire-toolbar {
            rad: r r 0 0;
            button { rad: r }
        }
        [class*="squireToolbar"] {
            colors: 0 $darker $t;
            // Dropdown list.
            [class*="-select-list"] {
                colors: 0 0 $dark;
                box-shadow: 0 2px 4px 0 $shadow;
                > li {
                    padding: 0 1.5rem;
                    colors: $lighter 0 0;
                    &:hover { colors: $light 0 $darker; }
                }
            }
            // On event.
            [class*="squireToolbar-action-"] {
                colors: 0 $darker $dark;
                &:hover { colors: 0 0 $darker; }
                [class*="triangle-with-shadow"]::after {
                    border-width: 5px;
                    colors: 0 $darker $dark;
                }
            }
        }
        // Encrypt.
        header[class*="Encrypt-"] { colors: 0 0 $t; }
        // * Feature -> Custom code font.
        .plaintext-editor { font-family: var(--mo-font) }
    }
    // Expiration settings.
    .alert, .alert.alert-info {
        colors: $light 0 $t;
        input[type], .pm_select {
            border-radius: calc(var(--radius) / 2) !important;
            colors: $light $darker $dark;
        }
    }

    // * Squire -> Text area.
    .angular-squire-wrapper {
        margin-top: -1px;
        colors: 0 $darker 0;
        &, & > iframe { rad: 0 0 r r }
    }


    // * Modals.
    .pm_modal {
        .modal-dialog {
            rad: r;
            border-width: 1px;
            colors: 0, $darker, $dark;
            .modal-content {
                colors: 0, $darker, $t;
                .modal-body { box-shadow: 0 1px 0 $darker, 0 -1px 0 $darker; }
            }
            .modal-footer { colors: 0, 0, $t; }
        }
        // Buttons.
        .close {
            top: 20px !important;
            right: 20px !important;
            transition: 0.15s ease;
            colors: $light, 0, $t;
            &:hover { colors: $accent, 0, 0; }
        }
        .pm_button {
            rad: r;
            transition: 0.15s ease;
            colors: $lighter, $darker, $dark;
            &:hover, &:focus { colors: $light, 0, $darker; }
            &.primary {
                colors: $accent, $accent, 0;
                &:hover, &:focus { colors: $white, $accent, $accent; }
            }
        }
        // TODO: Figure out where exactly this goes.
        .modal-details { colors: 0, $darker, 0; }
        .labelModal-container .pm_button.primary {
            color: var(--lighter);
            border-color: var(--accent);
            background-color: var(--accent);
        }
        .dropzone {
            border-color: var(--shadow);
            background: var(--darker);
        }
    }


    // * Contacts.
    .contacts-container {
        [class*="toolbar" i] {
            colors: 0 $darker 0
            button {
                colors: $lighter $darker 0
                &:hover { colors: $light 0 $darker }
                &.primary { colors: $accent $accent 0 }
            }
        }
        .contactList-container {
            colors: 0 $darker $t;
        }
    }


    // * Settings dashboard.
    .settingsDashboard-container {
        // Overview.
        .overviewSection-container {
            .overviewSection-tbody-billing { background: none !important; }
        }
        // Billing.
        .settingsDashboard-plans {
            colors: 0, 0, $t;
            &, &::after, &::before { background: none !important; }
            [class*="Column-container"] {
                margin: 0 4px 0 0;
                rad: r !important;
                colors: $lighter, $darker, $dark;
                box-shadow: none !important;
                > :not(:last-child) { colors: 0, $darker, 0; }
                header {
                    rad: r r 0 0;
                    colors: 0, $red, 0;
                    box-shadow: none;
                    > .isCurrent {
                        top: -32px;
                        colors: $light, $t, $t;
                        box-shadow: none;
                    }
                }
                // Remove gradients.
                [class*="totalRows-label"] { background: none; }
                // TODO: Move to global components.
                .pm_select {
                    colors: $lighter, $darker, $dark;
                    box-shadow: 0 0 0 1px inset $darker;
                    select:active, select:focus {
                        colors: $light, 0, 0;
                        box-shadow: 0 0 0 1px inset $accent;
                    }
                }
            }
        }
    }
}
